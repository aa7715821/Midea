<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美的，中国家电行业领导者</title>
    <link rel="shortcut icon" href="../src/images/favicon.ico">
    <link rel="stylesheet" href="../src/css/registry.css">

</head>

<body>
    <div class="header">
        <a href="../src/index1.html">
            <div class="logio">
            </div>
        </a>
    </div>
    <div class="main">
        <!-- 左侧品牌宣传 -->
        <div class="Brand_promotion">
            <img src="https://pic.midea.cn/h5/pic/202006/51e8ecce92b9.png?x-oss-process=image/format,webp/quality,Q_90&@100Q.png " alt="美的会员PRO专场">
        </div>
        <!-- 右侧注册登录 -->
        <form action="http://localhost/8-17_HTML/Midea/php/registry.php" id="registry" method="POST">
            <p class="care">注意*为必选项</p>
            <h2>账户详细资料</h2>
            <label style="top:140px">用户名称:</label><input type="text" autofocus="autofocus" placeholder="您的账户名和登录名" name="username" class="username"> <span style="top:142px" class="user-span"></span>
            <label style="top:190px">设置密码:</label><input type="text" placeholder="建议至少使用两种字符组合" name="password"><span style="top:188px"></span>
            <label style="top:230px">确认密码:</label><input type="text" placeholder="请再次输入密码"><span style="top:235px" placeholder=""></span>
            <h2>个人信息资料</h2>
            <label style="top:370px">电子邮箱:</label><input type="text" placeholder="请输入邮箱" name="email"><span style="top:370px" placeholder=""></span>
            <label style="top:416px">真实姓名:</label><input type="text" placeholder="请输入真实姓名"><span style="top:417px" placeholder=""></span>
            <label style="top:462px">中奖手机号码:</label><input type="text" placeholder="请输入中奖手机号码"><span style="top:460px" placeholder=""></span>
            <label style="top:509px">验证码:</label><input type="text" placeholder="请输入验证码"><span style="top:507px;" placeholder="点击更换验证码" class="yzm"></span>
            <input type="submit" name="submit" value="注册" style="margin-left: 10px;">
            <label class="Sign">10天内免登陆</label>
            <input type="checkbox" class="box">
        </form>
    </div>
    <div class="copyright">
        Copyright © 1968-2020 广东美的网络科技有限公司 粤ICP备17058257号
    </div>
</body>
<script src="../src/js/registry.js"></script>
<script src="../src/js/callback.js"></script>
<script>
    const form = document.querySelector('#registry');
    const username = document.querySelector('.username');
    const span = document.querySelector('.user-span');
    let flag = true;
    username.onblur = function() {
        console.log(111111111111111111111);
        ajax({
            type: 'post',
            url: 'http://localhost/8-17_HTML/Midea/php/registry.php',
            data: {
                username: this.value
            },
            success: function(data) {
                if (data) {
                    span.innerHTML = '该用户名已存在';
                    span.style.color = 'red';
                    flag = false;
                } else {
                    span.innerHTML = '√';
                    span.style.color = 'green';
                    flag = true;
                }
            }
        })
    };

    form.onsubmit = function() {
        if (username.value === '') {
            span.innerHTML = '该用户名不能为空';
            span.style.color = 'red';
            flag = false;
        }
        if (!flag) {
            return false; //阻止跳转
        }
    }
</script>

</html>